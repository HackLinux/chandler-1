--- PyLucene-0.9.3-137/Makefile	2004-12-11 18:59:22.000000000 -0800
+++ PyLucene-0.9.3-137-patched/Makefile	2004-12-15 08:56:57.791895216 -0800
@@ -245,17 +245,17 @@
 PYLUCENE_CP:=$(PYLUCENE_CP):$(DB)/java/src
 
 ifeq ($(OS),Cygwin)
 DB_SRCS=`find $(DB)/java/src/com/sleepycat/db -name '*.java' -exec cygpath -aw {} \;` 
 DB_INC=-I`cygpath -aw $(PREFIX_DB)` -I`cygpath -aw $(PREFIX_DB)/dbinc` -I`cygpath -aw $(PREFIX_DB)/build_win32`
 PYLUCENE_CP:=`cygpath -awp $(PYLUCENE_CP)`
 else
 DB_SRCS=`find $(DB)/java/src/com/sleepycat/db -name '*.java'`
-DB_INC=-I$(PREFIX_DB)/include -I$(DB) -I$(DB)/build_unix
+DB_INC=-I$(PREFIX_DB)/include -I$(DB) -I$(DB)/$(BUILD_DB)
 endif
 
 STORE_SRCS=`find store-$(LUCENE_VER) -name '*.java' -print`
 OBJS:=$(BINDIR)/store.o $(BINDIR)/db.o $(OBJS)
 LIBS:=$(LIBDB_JAVA_LIB) $(LIBS)
 SWIG_OPT:=$(SWIG_OPT) -D_WITH_DB_DIRECTORY=1 -DDB_LIB_VER="'$(DB_LIB_VER)'" -DDB_VER=$(subst .,,$(DB_LIB_VER))
 
 $(BINDIR)/db.o:
@@ -296,17 +296,17 @@
 ifeq ($(OS),Cygwin)
 DB_SRCS=`find $(DB)/java/src/com/sleepycat/db -regex '.*/db/[^/]*java' -exec cygpath -aw {} \;` 
 DB_CONST=`cygpath -aw $(DB)/java/src/com/sleepycat/db/$(BINDIR)/DbConstants.java`
 DB_INC=-I`cygpath -aw $(PREFIX_DB)` -I`cygpath -aw $(PREFIX_DB)/dbinc` -I`cygpath -aw $(PREFIX_DB)/build_win32`
 PYLUCENE_CP:=`cygpath -awp $(PYLUCENE_CP)`
 else
 DB_SRCS=`find $(DB)/java/src/com/sleepycat/db -regex '.*/db/[^/]*java'`
 DB_CONST=$(DB)/java/src/com/sleepycat/db/$(BINDIR)/DbConstants.java
-DB_INC=-I$(PREFIX_DB)/include -I$(DB) -I$(DB)/build_unix
+DB_INC=-I$(PREFIX_DB)/include -I$(DB) -I$(DB)/$(BUILD_DB)
 endif
 
 STORE_SRCS=`find store-$(LUCENE_VER) -name '*.java' -print`
 OBJS:=$(BINDIR)/store.o $(BINDIR)/db_const.o $(BINDIR)/db.o $(OBJS)
 LIBS:=$(LIBDB_JAVA_LIB) $(LIBS)
 SWIG_OPT:=$(SWIG_OPT) -D_WITH_DB_DIRECTORY=1 -DDB_LIB_VER="'$(DB_LIB_VER)'" -DDB_VER=$(subst .,,$(DB_LIB_VER))
 
 $(BINDIR)/db_const.o:
@@ -671,23 +671,29 @@
 else
 
 ifeq ($(OS),Linux)
 install::
 ifdef DB
 	mkdir -p $(PREFIX_DB)/lib
 	install $(LIBDB_JAVA_LIB) $(PREFIX_DB)/lib
 endif
+	install $(GCJ_HOME)/lib/libgcj.so.5 $(PREFIX)/lib
+	install $(GCJ_HOME)/lib/libstdc++.so.6 $(PREFIX)/lib
+	install $(GCJ_HOME)/lib/libgcc_s.so.1 $(PREFIX)/lib
+	strip $(PREFIX)/lib/libgcj.so.5
+	strip $(PREFIX)/lib/libstdc++.so.6
 else
 
 ifeq ($(OS),Cygwin)
 install::
 	install $(GCJ_HOME)/bin/libiconv-2.dll $(PYTHON_SITE)
 ifdef DB
-	install $(LIBDB_JAVA_LIB) $(PREFIX_DB)/build_win32/$(BINDIR)
+	mkdir -p $(PREFIX)/bin
+	install $(LIBDB_JAVA_LIB) $(PREFIX)/bin
 endif
 endif
 endif
 endif
 
 
 clean:
 	rm -rf $(BINDIR) PyLucene.py* PyLucene_wrap.cxx
