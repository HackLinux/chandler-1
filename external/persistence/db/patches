--- db-4.2.52/dist/Makefile.in	Fri Nov 28 10:50:06 2003
+++ db-4.2.52-patched/dist/Makefile.in	Wed Dec 31 12:18:38 2003
@@ -662,17 +662,17 @@
 # Shared C++ library.
 $(libxso_target): $(CXX_OBJS) $(C_OBJS)
 	$(XSOLINK) $(SOFLAGS) $(LDFLAGS) \
-	    -o $@ $(CXX_OBJS) $(C_OBJS) $(LIBXSO_LIBS)
+	    -o $@ $(CXX_OBJS) $(libso_target) $(LIBXSO_LIBS)
 
 # Shared Java library.
 $(libjso_target): $(JAVA_OBJS) $(C_OBJS)
 	$(SOLINK) -shrext @JMODSUFFIX@ $(SOFLAGS) $(LDFLAGS) \
-	    -o $@ $(JAVA_OBJS) $(C_OBJS) $(LIBJSO_LIBS)
+	    -o $@ $(JAVA_OBJS) $(libso_target) $(LIBJSO_LIBS)
 
 # Shared Tcl library.
 $(libtso_target): $(TCL_OBJS) $(C_OBJS)
 	$(SOLINK) @LIBTSO_MODULE@ $(SOFLAGS) $(LDFLAGS) \
-	    -o $@ $(TCL_OBJS) $(C_OBJS) $(LIBTSO_LIBS)
+	    -o $@ $(TCL_OBJS) $(libso_target) $(LIBTSO_LIBS)
 
 ##################################################
 # Creating individual dependencies and actions for building class
--- db-4.2.52/libdb_java/db_java_wrap.c	2003-12-03 13:10:36.000000000 -0800
+++ db-4.2.52-patched/libdb_java/db_java_wrap.c	2004-03-20 17:13:46.827006400 -0800
@@ -16,6 +16,12 @@
 #include <stdlib.h>
 #include <string.h>
 
+#if defined(GCJ) && defined(WIN32) /* gcj jni doesn't use __stdcall */
+#undef JNIEXPORT
+#undef JNICALL
+#define JNIEXPORT
+#define JNICALL
+#endif
 
 /* Support for throwing Java exceptions */
 typedef enum {
