<?xml version="1.0"?>

<agent name="Test Agent">
   <attribute name="roles">watcher</attribute>
   <attribute name="agentDescription">This is our very first agent, who does random
       sorts of things in order to test the framework.
    </attribute>

   <repertoire name="Test Agent Repertoire">
      <condition name="IM arrived example">
         <attribute name="conditionDescription">This condition is invoked when an instant message arrives and filters on the fromAddress field</attribute>
         <attribute name="conditionNotification">chandler/im/message-arrived</attribute>
         <attribute name="conditionFilterMode">matches</attribute>
         <attribute name="conditionAttribute">fromAddress</attribute>
         <attribute name="conditionValue">.*differnet.com</attribute>     
      </condition>

       <action name="Print Message Body example">
         <attribute name="actionType">inline</attribute>
         <attribute name="actionDescription">this action prints the body attribute to standard output</attribute>
         <attribute name="actionScript">print data['body']</attribute>
      </action>  

       <action name="Post dialog with confirm example" class="application.agents.model.DialogAction">
         <attribute name="actionType">dialog</attribute>
         <attribute name="actionDescription">this action posts a dialog containing a message, based on a template</attribute>
         <attribute name="actionValue">You received a message from [fromAddress]:\n    [body]</attribute>
         <attribute name="confirmFlag">True</attribute>
         <attribute name="actionPermissionRequest">Agent [agentname] requires your permssion to post a dialog.  Do you grant it?</attribute>
      </action>   

   </repertoire>
   
   <instruction enabled="True">
      <condition name="Occupation changed">
         <attribute name="conditionDescription">This condition is invoked when the occupation field of a contact is changed to a specific value</attribute>
         <attribute name="conditionNotification">chandler/parcels/OSAF/contacts/contact-changed</attribute>
         <attribute name="conditionFilterMode">listequals</attribute>
         <attribute name="conditionAttribute">attribute,value</attribute>
         <attribute name="conditionValue">occupation,Dentist</attribute>     
      </condition>
      
      <action name="Post dialog" class="application.agents.model.DialogAction">
         <attribute name="actionType">confirmdialog</attribute>
         <attribute name="actionDescription">this action posts a dialog containing a message, based on a template</attribute>
         <attribute name="actionValue">You have new dentist in your contacts. Do you want to send it to your Family?</attribute>
      </action>   
   </instruction> 

   <instruction enabled="True">
       <condition name="IM arrived">
         <attribute name="conditionDescription">This condition is invoked when an instant message arrives and filters on the fromAddress field</attribute>
         <attribute name="conditionNotification">chandler/im/message-arrived</attribute>
         <attribute name="conditionFilterMode">matches</attribute>
         <attribute name="conditionAttribute">fromAddress</attribute>
         <attribute name="conditionValue">.*differnet.com</attribute>     
      </condition>

       <action name="Print Message Body example">
         <attribute name="actionType">inline</attribute>
         <attribute name="actionDescription">this action prints the body attribute to standard output</attribute>
         <attribute name="actionScript">print data['body']</attribute>
      </action>    
   </instruction> 

</agent>
