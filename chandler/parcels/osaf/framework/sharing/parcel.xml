<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003-2004 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel itsName="sharing"
    xmlns="http://osafoundation.org/parcels/core"
    xmlns:cm="http://osafoundation.org/parcels/osaf/contentmodel"
    xmlns:contact="http://osafoundation.org/parcels/osaf/contentmodel/contacts"
    xmlns:share="http://osafoundation.org/parcels/osaf/framework/sharing"
    itemClass="osaf.framework.sharing.Sharing.Parcel"
    >

    <displayName value="Sharing Parcel" />
    <description value="Code for sharing related activities (handling sharing invites, etc)" />
    <version value="0.3" />
    <author value="Open Source Applications Foundation" />

    <Kind itsName="ImportExportFormat">
        <superKinds itemref="cm:ChandlerItem"/>
        <displayName value="Import/Export Format Kind"/>
        <classes key="python" value="osaf.framework.sharing.Sharing.ImportExportFormat"/>

        <Attribute itsName="share">
            <type itemref="share:Share"/>
            <inverseAttribute itemref="share:Share/format"/>
            <cardinality value="single"/>
        </Attribute>

    </Kind>

    <Kind itsName="ICalendarFormat">
        <superKinds itemref="share:ImportExportFormat"/>
        <displayName value="iCalendar Import/Export Format Kind"/>
        <classes key="python" value="osaf.framework.sharing.ICalendar.ICalendarFormat"/>
    </Kind>

    <Kind itsName="CloudXMLFormat">
        <superKinds itemref="share:ImportExportFormat"/>
        <displayName value="Cloud XML Import/Export Format Kind"/>
        <classes key="python" value="osaf.framework.sharing.Sharing.CloudXMLFormat"/>

        <Attribute itsName="cloudAlias">
            <type itemref="String"/>
        </Attribute>
    </Kind>

    <Kind itsName="Share">
        <superKinds itemref="cm:ChandlerItem"/>
        <displayName value="Share Kind"/>
        <description value="Represents a shared collection" />
        <classes key="python" value="osaf.framework.sharing.Sharing.Share"/>

        <Attribute itsName="hidden">
            <description value="This attribute is used to denote which shares have been created by the user via the detail view (hidden=False) versus those that are being created for other purposes (hidden=True), such as transient import/export shares, .ics publishing, etc." />
            <type itemref="Boolean"/>
            <cardinality value="single"/>
            <initialValue type="Boolean" value="False"/>
        </Attribute>

        <Attribute itsName="active">
            <description value="This attribute indicates whether this share should be synced during a 'sync all' operation." />
            <type itemref="Boolean"/>
            <cardinality value="single"/>
            <initialValue type="Boolean" value="True"/>
        </Attribute>

        <Attribute itsName="contents">
            <type itemref="cm:ItemCollection"/>
            <inverseAttribute itemref="cm:ItemCollection/shares"/>
            <cardinality value="single"/>
        </Attribute>

        <Attribute itsName="conduit">
            <type itemref="share:ShareConduit"/>
            <inverseAttribute itemref="share:ShareConduit/share"/>
            <cardinality value="single"/>
        </Attribute>

        <Attribute itsName="format">
            <type itemref="share:ImportExportFormat"/>
            <inverseAttribute itemref="share:ImportExportFormat/share"/>
            <cardinality value="single"/>
        </Attribute>

        <Attribute itsName="sharer">
            <description value="The contact who initially published this share" />
            <type itemref="contact:Contact" />
            <cardinality value="single" />
            <initialValue itemref="None" />
            <inverseAttribute itemref="contact:Contact/sharerOf" />
        </Attribute>

        <Attribute itsName="sharees">
            <description value="The people who were invited to this share" />
            <type itemref="contact:Contact" />
            <cardinality value="list" />
            <initialValue />
            <inverseAttribute itemref="contact:Contact/shareeOf" />
        </Attribute>

        <!-- Sharing Cloud -->
        <Cloud itsName="SharingCloud">
          <Endpoint itsName="contents">
            <attribute value="contents"/>
            <includePolicy value="byCloud"/>
          </Endpoint>
          <endpoints itemref="share:Share/SharingCloud/contents"/>
          <Endpoint itsName="sharer">
            <attribute value="sharer"/>
            <includePolicy value="byCloud"/>
          </Endpoint>
          <endpoints itemref="share:Share/SharingCloud/sharer"/>
          <Endpoint itsName="sharees">
            <attribute value="sharees"/>
            <includePolicy value="byCloud"/>
          </Endpoint>
          <endpoints itemref="share:Share/SharingCloud/sharees"/>
        </Cloud>
        <clouds alias="sharing" itemref="share:Share/SharingCloud"/>

    </Kind>

    <Kind itsName="ShareConduit">
        <superKinds itemref="cm:ChandlerItem"/>
        <displayName value="Share Conduit Kind"/>
        <classes key="python" value="osaf.framework.sharing.Sharing.ShareConduit"/>

        <Attribute itsName="share">
            <type itemref="share:Share"/>
            <inverseAttribute itemref="share:Share/conduit"/>
            <cardinality value="single"/>
        </Attribute>

        <Attribute itsName="sharePath">
            <type itemref="String"/>
            <description value="The parent 'directory' of the share" />
        </Attribute>

        <Attribute itsName="shareName">
            <type itemref="String"/>
            <description value="The 'directory' name of the share, relative to 'sharePath'" />
        </Attribute>

        <Attribute itsName="manifest">
            <description value="Keeps track of 'remote' item information, such as last modified date or ETAG" />
            <type itemref="Dictionary"/>
            <cardinality value="dict" />
        </Attribute>

    </Kind>

    <Kind itsName="FileSystemConduit">
        <superKinds itemref="share:ShareConduit"/>
        <displayName value="File System Share Conduit Kind"/>
        <classes key="python" value="osaf.framework.sharing.Sharing.FileSystemConduit"/>
    </Kind>

    <Kind itsName="WebDAVConduit">
        <superKinds itemref="share:ShareConduit"/>
        <displayName value="WebDAV Share Conduit Kind"/>
        <classes key="python" value="osaf.framework.sharing.Sharing.WebDAVConduit"/>

        <Attribute itsName="account">
            <type itemref="share:WebDAVAccount"/>
            <cardinality value="single"/>
            <inverseAttribute itemref="share:WebDAVAccount/conduits"/>
        </Attribute>

        <Attribute itsName="host">
            <type itemref="String"/>
        </Attribute>

        <Attribute itsName="port">
            <type itemref="Integer"/>
        </Attribute>

        <Attribute itsName="username">
            <type itemref="String"/>
        </Attribute>

        <Attribute itsName="password">
            <type itemref="String"/>
        </Attribute>

    </Kind>


    <Kind itsName="WebDAVAccount">
        <superKinds itemref="cm:ChandlerItem" />
        <classes key="python" value="osaf.framework.sharing.Sharing.WebDAVAccount"/>
        <displayName value="WebDAV Account" />
        <description value="A WebDAV 'Account'" />
        <issues value="Long term we're probably not going to treat WebDAV as an account, but rather how a web browser maintains URL-to-ACL mappings." />

        <Attribute itsName="username">
            <displayName value="Username" />
            <type itemref="String" />
            <initialValue type="String" />
        </Attribute>

        <Attribute itsName="password">
            <displayName value="Password" />
            <issues value="This should not be a simple string. We need some solution for encrypting it." />
            <type itemref="String" />
            <initialValue type="String" />
        </Attribute>

        <Attribute itsName="host">
            <displayName value="Host" />
            <description value="The hostname of the account" />
            <type itemref="String" />
            <initialValue type="String" />
        </Attribute>

        <Attribute itsName="path">
            <displayName value="Path" />
            <description value="Base path on the host to use for publishing" />
            <type itemref="String" />
            <initialValue type="String" />
        </Attribute>

        <Attribute itsName="port">
            <displayName value="Port" />
            <description value="The non-SSL port number to use" />
            <type itemref="Integer" />
            <initialValue type="Integer" value="80" />
        </Attribute>

        <Attribute itsName="useSSL">
            <displayName value="Use secure connection (SSL/TLS)" />
            <description value="Whether or not to use SSL/TLS" />
            <type itemref="Boolean" />
            <initialValue type="Boolean" value="False" />
        </Attribute>

        <Attribute itsName="accountType">
            <displayName value="Account Type" />
            <initialValue type="String" value="WebDAV" />
        </Attribute>

        <Attribute itsName="conduits">
            <type itemref="share:WebDAVConduit"/>
            <cardinality value="list"/>
            <inverseAttribute itemref="share:WebDAVConduit/account"/>
        </Attribute>
    </Kind>

</Parcel>
