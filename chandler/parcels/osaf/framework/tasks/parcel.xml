<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003-2004 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel describes="//parcels/osaf/framework/tasks"
        itsName="tasks"
        xmlns="http://osafoundation.org/parcels/core"
        xmlns:sched="http://osafoundation.org/parcels/osaf/framework/tasks">

  <displayName>Task Schema</displayName>

  <!-- Kind: Action -->

  <Kind itsName="Action">
    <displayName>Action</displayName>

    <Enumeration itsName="ActionTypeEnum">
      <values>none</values>
      <values>script</values>
      <values>expression</values>
      <values>inline</values>
      <values>classmethod</values>
    </Enumeration>

    <Attribute itsName="actionType">
      <displayName>Action Type</displayName>
      <type itemref="sched:Action/ActionTypeEnum"/>
      <cardinality>single</cardinality>
      <!-- <initialValue>none</initialValue> -->
    </Attribute>
  
    <Attribute itsName="actionScript">
      <displayName>Action Script</displayName>
      <type itemref="String"/>
      <cardinality>single</cardinality>
    </Attribute>
  
    <Attribute itsName="actionValue">
      <displayName>Action Script</displayName>
      <type itemref="String"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="actionFilePath">
      <displayName>Action Script</displayName>
      <type itemref="String"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="asyncFlag">
      <displayName>Asynchronous Flag</displayName>
      <type itemref="Boolean"/>
      <cardinality>single</cardinality>
      <initialValue type="Boolean">False</initialValue>
    </Attribute>

    <Attribute itsName="wxThreadFlag">
      <displayName>Asynchronous Flag</displayName>
      <type itemref="Boolean"/>
      <cardinality>single</cardinality>
      <initialValue type="Boolean">False</initialValue>
    </Attribute>
    
    <Attribute itsName="confirmFlag">
      <displayName>Request Confirmation Flag</displayName>
      <type itemref="Boolean"/>
      <cardinality>single</cardinality>
      <initialValue type="Boolean">False</initialValue>
    </Attribute>

    <Attribute itsName="actionPermissionRequest">
      <displayName>Action Script</displayName>
      <type itemref="String"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="actionOwner">
      <displayName>Action Instruction Backlink</displayName>
      <type itemref="sched:Task"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="sched:Task/actions"/>
    </Attribute>

    <attributes itemref="sched:Action/actionType"/>
    <attributes itemref="sched:Action/actionScript"/>
    <attributes itemref="sched:Action/actionValue"/>
    <attributes itemref="sched:Action/actionFilePath"/>
    <attributes itemref="sched:Action/actionPermissionRequest"/>
    <attributes itemref="sched:Action/asyncFlag"/>
    <attributes itemref="sched:Action/wxThreadFlag"/>
    <attributes itemref="sched:Action/confirmFlag"/>
    <attributes itemref="sched:Action/actionOwner"/>
    <superKinds itemref="Item"/>
    <classes key="python">osaf.framework.tasks.Action.Action</classes>
  </Kind>


  <!-- Kind: Schedule -->

  <Kind itsName="Schedule">
    <displayName>Timed Condition</displayName>

    <Attribute itsName="startTime">
      <displayName>Start Time</displayName>
      <type itemref="DateTime"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="repeatFlag">
      <displayName>Repeat Flag</displayName>
      <type itemref="Boolean"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="repeatDelay">
      <displayName>Repeat Delay</displayName>
      <type itemref="DateTimeDelta"/>
      <cardinality>single</cardinality>
    </Attribute>

    <Attribute itsName="scheduleOwner">
      <displayName>Schedule Owner</displayName>
      <type itemref="sched:Task"/>
      <cardinality>single</cardinality>
      <inverseAttribute itemref="sched:Task/schedule"/>
    </Attribute>

    <attributes itemref="sched:Schedule/startTime"/>
    <attributes itemref="sched:Schedule/repeatFlag"/>
    <attributes itemref="sched:Schedule/repeatDelay"/>
    <attributes itemref="sched:Schedule/scheduleOwner"/>
    <superKinds itemref="Item"/>
  </Kind>


  <!-- Kind: Instruction -->

  <Kind itsName="Task">
    <displayName>Task</displayName>

    <Attribute itsName="enabled">
      <displayName>Enabled Flag</displayName>
      <type itemref="Boolean"/>
      <cardinality>single</cardinality>
      <initialValue type="Boolean">False</initialValue>
    </Attribute>

    <Attribute itsName="schedule">
      <displayName>Instruction Schedule</displayName>
      <type itemref="sched:Schedule"/>
      <cardinality>single</cardinality>
      <inverseAttribute itemref="sched:Schedule/scheduleOwner"/>
    </Attribute>
  
    <Attribute itsName="actions">
      <displayName>Instruction Actions</displayName>
      <type itemref="sched:Action"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="sched:Action/actionOwner"/>
    </Attribute>
  
    <attributes itemref="sched:Task/enabled"/>
    <attributes itemref="sched:Task/schedule"/>
    <attributes itemref="sched:Task/actions"/>

    <superKinds itemref="Item"/>

    <classes key="python">osaf.framework.tasks.Task.Task</classes>
  </Kind>

</Parcel>
