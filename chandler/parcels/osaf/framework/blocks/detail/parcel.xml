<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003-2004 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<core:Parcel describes="//parcels/osaf/framework/blocks/detail"
             itsName="detail"
	         itemClass="osaf.framework.blocks.detail.Detail.DetailParcel"
             xmlns="http://osafoundation.org/parcels/osaf/framework/blocks"
             xmlns:core="http://osafoundation.org/parcels/core"
             xmlns:blocks="http://osafoundation.org/parcels/osaf/framework/blocks"
             xmlns:content="http://osafoundation.org/parcels/osaf/contentmodel"
             xmlns:doc="http://osafoundation.org/parcels/osaf/framework/blocks/detail">

  <!--   
       Warning - Adding this line to the includes above causes trouble!
       The problem probably has something to do with defining a template
       and including it in the same set of XML files.
             xmlns:events="http://osafoundation.org/parcels/osaf/framework/blocks/Events"
  -->

  <core:version>0.3</core:version>
  
  <!--
    Styles
  -->
  <CharacterStyle itsName="TextStyle">
    <fontFamily>DefaultUIFont</fontFamily>
    <fontSize>10</fontSize>
  </CharacterStyle>

  <CharacterStyle itsName="LabelStyle">
    <fontFamily>DefaultUIFont</fontFamily>
    <fontSize>12</fontSize>
  </CharacterStyle>

  <ColorStyle itsName="GrayBackground1">
    <backgroundColor>240,240,240,240</backgroundColor>
  </ColorStyle>
  
  <ColorStyle itsName="GrayBackground2">
    <backgroundColor>181,181,181,181</backgroundColor>
  </ColorStyle>
  
  <ColorStyle itsName="GrayBackground3">
    <backgroundColor>204,204,204,204</backgroundColor>
  </ColorStyle>
      
  <!--
    Events
  -->
  
  <BlockEvent itsName="NULL">
    <description>The NULL event, used when no event is needed. </description>
    <examples>An unimplemented MenuItem</examples>
    <methodName>onNULLEvent</methodName>
    <dispatchEnum>SendToBlock</dispatchEnum>
    <dispatchToBlock itemref="doc:DetailRootTemplate"/>
  </BlockEvent>

  <BlockEvent itemName="ButtonPressed">
    <dispatchEnum>SendToBlock</dispatchEnum>
    <methodName>onButtonPressed</methodName>
    <dispatchToBlock itemref="doc:MarkupBar"/>
  </BlockEvent>

  <BlockEvent itemName="SendMailMessage">
    <dispatchEnum>SendToBlock</dispatchEnum>
    <methodName>onSendMailMessageEvent</methodName>
    <dispatchToBlock itemref="doc:DetailRootTemplate"/>
  </BlockEvent>

  <!--
    Layout blocks
  -->
  
  <!-- Root -->
  <SelectionContainer itemName="DetailRootTemplate"
                     itemClass="osaf.framework.blocks.detail.Detail.DetailRoot">
    <childrenBlocks itemref="doc:DetailTrunk"/>
    <subscribeWhenVisibleEvents itemref="doc:SendMailMessage"/>
    <subscribeWhenVisibleEvents itemref="doc:NULL"/>
  </SelectionContainer>

  <ContentItemDetail itemName="DetailTrunk">
    <!-- child blocks -->
    <childrenBlocks itemref="doc:MarkupBar"/>
    <childrenBlocks itemref="doc:FromAndToArea"/>
    <childrenBlocks itemref="doc:CoreIndent"/>
    <childrenBlocks itemref="doc:NotesArea"/>
    <childrenBlocks itemref="doc:SendBar"/>
    <!-- Attributes -->
    <orientationEnum>Vertical</orientationEnum>
    <size>80,20</size>
    <minimumSize>80,40</minimumSize>
    <eventBoundary>True</eventBoundary>
  </ContentItemDetail>

  <!-- MarkupBar -->
  <Toolbar itemName="MarkupBar"
           itemClass="osaf.framework.blocks.detail.Detail.MarkupBar">
    <blockName>MarkupBar</blockName>
    <!-- Children Blocks-->
    <childrenBlocks itemref="doc:TriageButton"/>
    <childrenBlocks itemref="doc:Triage"/>
    <childrenBlocks itemref="doc:SharingButton"/>
    <childrenBlocks itemref="doc:TaskStamp"/>
    <childrenBlocks itemref="doc:CalendarStamp"/>
    <childrenBlocks itemref="doc:Spacer1"/>
    <childrenBlocks itemref="doc:NeedsReplyButton"/>
    <childrenBlocks itemref="doc:Spacer2"/>
    <childrenBlocks itemref="doc:OutboxFlag"/>
    <childrenBlocks itemref="doc:RepliedFlag"/>
    <childrenBlocks itemref="doc:ForwardedFlag"/>
    <childrenBlocks itemref="doc:RedirectedFlag"/>
    <childrenBlocks itemref="doc:DraftFlag"/>
    <childrenBlocks itemref="doc:QueuedFlag"/>
    <childrenBlocks itemref="doc:Spacer3"/>
    <childrenBlocks itemref="doc:PrivateButton"/>
    <!-- Attributes -->
    <colorStyle itemref="doc:GrayBackground3"/>
    <toolSize>16,16</toolSize>
    <separatorWidth>50</separatorWidth>
    <subscribeWhenVisibleEvents itemref="doc:ButtonPressed"/>
  </Toolbar>

  <!--
    ToolbarItems
  -->
  <ToolbarItem itsName="TriageButton">
    <blockName>TriageButton</blockName>
    <title>Triage</title>
    <bitmap>application/images/triage.png</bitmap>
    <selectedBitmap></selectedBitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Decide when to do...</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="Triage">
    <blockName>Triage</blockName>
    <title>Triage</title>
    <toolbarItemKind>Choice</toolbarItemKind>
    <helpString>Mark Item to be done now or later, etc</helpString>
    <prototype itemref="doc:TriageChoice"/>
    <event itemref="doc:NULL"/>
  </ToolbarItem>
  
  <!-- prototype for the above ToolbarItem -->
  <Choice itemName="TriageChoice">
    <choices>Processing</choices>
    <choices>Defered until</choices>
    <choices>Processed</choices>
    <choices>Junk</choices>
    <choices>Trash</choices>
  </Choice>
  
  <ToolbarItem itsName="SharingButton"
               itemClass="osaf.framework.blocks.detail.Detail.SharingButton">
    <blockName>SharingButton</blockName>
    <title>Sharing</title>
    <bitmap>application/images/sharing.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <toggle>True</toggle>
    <helpString>Enable sharing</helpString>
    <event itemref="doc:ButtonPressed"/>
  </ToolbarItem>

  <ToolbarItem itsName="TaskStamp"
               itemClass="osaf.framework.blocks.detail.Detail.TaskStamp">
    <blockName>TaskStamp</blockName>
    <title>Task</title>
    <bitmap>application/images/task.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <toggle>True</toggle>
    <helpString>Make into a Task</helpString>
    <event itemref="doc:ButtonPressed"/>
  </ToolbarItem>

  <ToolbarItem itsName="CalendarStamp"
               itemClass="osaf.framework.blocks.detail.Detail.CalendarStamp">
    <blockName>CalendarStamp</blockName>
    <title>Calendar</title>
    <bitmap>application/images/calendar.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <toggle>True</toggle>
    <helpString>Put onto the Calendar</helpString>
    <event itemref="doc:ButtonPressed"/>
  </ToolbarItem>

  <ToolbarItem itsName="Spacer1">
    <blockName>Spacer1</blockName>
    <toolbarItemKind>Separator</toolbarItemKind>
  </ToolbarItem>

  <ToolbarItem itsName="NeedsReplyButton">
    <blockName>NeedsReplyButton</blockName>
    <title>Needs reply</title>
    <bitmap>application/images/reply.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <toggle>True</toggle>
    <helpString>Needs a reply</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="Spacer2">
    <blockName>Spacer2</blockName>
    <toolbarItemKind>Separator</toolbarItemKind>
  </ToolbarItem>

  <ToolbarItem itsName="OutboxFlag">
    <blockName>OutboxFlag</blockName>
    <title>Outbox</title>
    <bitmap>application/images/outbox.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>In the Out box</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="RepliedFlag">
    <blockName>RepliedFlag</blockName>
    <title>Replied</title>
    <bitmap>application/images/replied.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>A reply has been sent</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="ForwardedFlag">
    <blockName>ForwardedFlag</blockName>
    <title>Forwarded</title>
    <bitmap>application/images/forwarded.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Has been forwarded</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="RedirectedFlag">
    <blockName>RedirectedFlag</blockName>
    <title>Redirected</title>
    <bitmap>application/images/redirected.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Message has been redirected</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="DraftFlag">
    <blockName>DraftFlag</blockName>
    <title>Draft</title>
    <bitmap>application/images/draft.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Message saved as a draft</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="QueuedFlag">
    <blockName>QueuedFlag</blockName>
    <title>Queued</title>
    <bitmap>application/images/queued.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Message has been queued</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <ToolbarItem itsName="Spacer3">
    <blockName>Spacer3</blockName>
    <toolbarItemKind>Separator</toolbarItemKind>
  </ToolbarItem>

  <ToolbarItem itsName="PrivateButton">
    <blockName>PrivateButton</blockName>
    <title>Private</title>
    <bitmap>application/images/private.png</bitmap>
    <toolbarItemKind>Button</toolbarItemKind>
    <helpString>Make item Private</helpString>
    <event itemref="doc:NULL"/>
  </ToolbarItem>

  <!-- FromAndToArea -->
  <ContentItemDetail itsName="FromAndToArea">
    <childrenBlocks itemref="doc:FromArea"/>
    <childrenBlocks itemref="doc:ToArea"/>
    <!-- Attributes -->
    <orientationEnum>Vertical</orientationEnum>
  </ContentItemDetail>
 
  <ContentItemDetail itsName="FromArea"
                     itemClass="osaf.framework.blocks.detail.Detail.LabeledTextAttributeBlock">
    <childrenBlocks itemref="doc:FromString"/>
    <childrenBlocks itemref="doc:FromEditField1"/>
    <!-- Attributes -->
    <orientationEnum>Horizontal</orientationEnum>
    <selectedItemsAttribute>whoFrom</selectedItemsAttribute>
  </ContentItemDetail>

  <StaticText itsName="FromString"
              itemClass="osaf.framework.blocks.detail.Detail.StaticRedirectAttribute">
    <title>From: </title>
    <characterStyle itemref="doc:LabelStyle"/>
    <textAlignmentEnum>Left</textAlignmentEnum>    
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>80, 24</minimumSize>
  </StaticText>
  
  <EditText itsName="FromEditField1"
            itemClass="osaf.framework.blocks.detail.Detail.FromEditField">
    <characterStyle itemref="doc:TextStyle"/>
    <lineStyleEnum>MultiLine</lineStyleEnum>
    <textStyleEnum>PlainText</textStyleEnum>
    <readOnly>True</readOnly>
    <textAlignmentEnum>Left</textAlignmentEnum>
    <minimumSize>80, 24</minimumSize>
  </EditText>

  <ContentItemDetail itsName="ToArea"
                     itemClass="osaf.framework.blocks.detail.Detail.LabeledTextAttributeBlock">
    <childrenBlocks itemref="doc:ToString"/>
    <childrenBlocks itemref="doc:ToEditField1"/>
    <!-- Attributes -->
    <orientationEnum>Horizontal</orientationEnum>
    <selectedItemsAttribute>who</selectedItemsAttribute>
  </ContentItemDetail>
 
  <StaticText itsName="ToString"
              itemClass="osaf.framework.blocks.detail.Detail.StaticRedirectAttribute">
    <title>To: </title>
    <characterStyle itemref="doc:LabelStyle"/>
    <textAlignmentEnum>Left</textAlignmentEnum>    
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>80, 24</minimumSize>
  </StaticText>
  
  <EditText itsName="ToEditField1"
            itemClass="osaf.framework.blocks.detail.Detail.ToEditField">
    <characterStyle itemref="doc:TextStyle"/>
    <lineStyleEnum>MultiLine</lineStyleEnum>
    <textStyleEnum>PlainText</textStyleEnum>
    <readOnly>False</readOnly>
    <textAlignmentEnum>Left</textAlignmentEnum>
    <minimumSize>80, 24</minimumSize>
  </EditText>

  <!-- CoreIndent -->
  <ContentItemDetail itsName="CoreIndent">
    <childrenBlocks itemref="doc:Indent"/>
    <childrenBlocks itemref="doc:CoreArea"/>
    <childrenBlocks itemref="doc:Indent2"/>
    <!-- Attributes -->
    <stretchFactor>2</stretchFactor>
  </ContentItemDetail>
 
  <ContentItemDetail itsName="Indent">
    <!-- Attributes -->
    <size>80,80</size>
    <stretchFactor>0</stretchFactor>
  </ContentItemDetail>
 
  <ContentItemDetail itsName="Indent2">
    <!-- Attributes -->
    <size>80,80</size>
    <stretchFactor>0</stretchFactor>
  </ContentItemDetail>
 
  <!-- CoreArea -->
  <ContentItemDetail itsName="CoreArea">
    <childrenBlocks itemref="doc:KindLabel"/>
    <childrenBlocks itemref="doc:HeadlineArea"/>
    <childrenBlocks itemref="doc:DateTime"/>
    <!-- Attributes -->
    <orientationEnum>Vertical</orientationEnum>
    <stretchFactor>2</stretchFactor>
  </ContentItemDetail>
 
  <StaticText itsName="KindLabel"
              itemClass="osaf.framework.blocks.detail.Detail.KindLabel">
    <title>Kind</title>
    <characterStyle itemref="doc:LabelStyle"/>
    <textAlignmentEnum>Center</textAlignmentEnum>    
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>80, 24</minimumSize>
  </StaticText>
  
  <ContentItemDetail itsName="HeadlineArea"
                     itemClass="osaf.framework.blocks.detail.Detail.LabeledTextAttributeBlock">
    <childrenBlocks itemref="doc:StaticHeadline"/>
    <childrenBlocks itemref="doc:EditHeadline"/>
    <!-- Attributes -->
    <orientationEnum>Horizontal</orientationEnum>
    <selectedItemsAttribute>about</selectedItemsAttribute>
    <minimumSize>380, 24</minimumSize>
    <stretchFactor>0.0</stretchFactor>
  </ContentItemDetail>
 
  <StaticText itsName="StaticHeadline"
              itemClass="osaf.framework.blocks.detail.Detail.StaticRedirectAttribute">
    <title>Subject</title>
    <characterStyle itemref="doc:LabelStyle"/>
    <textAlignmentEnum>Center</textAlignmentEnum>    
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>80, 24</minimumSize>
  </StaticText>
  
  <EditText itsName="EditHeadline"
            itemClass="osaf.framework.blocks.detail.Detail.EditRedirectAttribute">
    <characterStyle itemref="doc:TextStyle"/>
    <lineStyleEnum>SingleLine</lineStyleEnum>
    <textStyleEnum>PlainText</textStyleEnum>
    <readOnly>False</readOnly>
    <textAlignmentEnum>Left</textAlignmentEnum>
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>280, 24</minimumSize>
  </EditText>

  <StaticText itsName="DateTime"
              itemClass="osaf.framework.blocks.detail.Detail.DateTimeBlock">
    <title>Date/Time</title>
    <characterStyle itemref="doc:TextStyle"/>
    <textAlignmentEnum>Center</textAlignmentEnum>    
    <stretchFactor>0.0</stretchFactor>
    <minimumSize>80, 24</minimumSize>
  </StaticText>
  
  <!-- NotesArea -->
  <EditText itsName="NotesArea"
                   itemClass="osaf.framework.blocks.detail.Detail.NoteBody">
    <characterStyle itemref="doc:TextStyle"/>
    <lineStyleEnum>MultiLine</lineStyleEnum>
    <textStyleEnum>RichText</textStyleEnum>
    <readOnly>False</readOnly>
    <textAlignmentEnum>Left</textAlignmentEnum>
    <stretchFactor>3</stretchFactor>
    <minimumSize>380, 120</minimumSize>
  </EditText>

  <!-- Send Bar -->
  <ContentItemDetail itsName="SendBar"
                     itemClass="osaf.framework.blocks.detail.Detail.MailMessageBlock">
    <childrenBlocks itemref="doc:NotifyRadioBox"/>
    <childrenBlocks itemref="doc:SendButton"/>
    <!-- Attributes -->
    <minimumSize>300,40</minimumSize>
    <stretchFactor>1</stretchFactor>
    <orientationEnum>Horizontal</orientationEnum>
  </ContentItemDetail>
 
  <RadioBox itsName="NotifyRadioBox">
    <!-- Attributes -->
    <title>Notify</title>
    <choices>All</choices>
    <choices>New</choices>
    <radioAlignEnum>Across</radioAlignEnum>
    <itemsPerLine>2</itemsPerLine>

    <size>200,24</size>
    <minimumSize>200,30</minimumSize>
    <border>2.0, 2.0, 2.0, 2.0</border>
    <stretchFactor>0.0</stretchFactor>
  </RadioBox>
  
  <Button itsName="SendButton">
    <!-- Attributes -->
    <title>Send</title>
    <buttonKind>Text</buttonKind>

    <size>60,30</size>
    <minimumSize>60,30</minimumSize>
    <border>2.0, 2.0, 2.0, 2.0</border>
    <event itemref="doc:SendMailMessage"/>
    <alignmentEnum>alignCenter</alignmentEnum>
    <stretchFactor>0.0</stretchFactor>
  </Button>

</core:Parcel>
