<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel describes="//parcels/OSAF/framework/blocks"
        itemName="blocks"
        xmlns="//Schema/Core"
        xmlns:docSchema="//parcels/OSAF/framework/blocks"

        xmlns:parent1 = "//parcels/OSAF/framework"
        xmlns:parent2 = "//parcels/OSAF/framework/notifications"

        xmlns:events="//parcels/OSAF/framework/notifications/schema">

  <description>Schema for blocks that make up CPIA documents </description>
  <version>0.3</version>
  
  <!--
    global attributes for CPIA documents
  -->
  <Enumeration itemName="fontFamilyEnumType">
    <values>DefaultUIFont</values>
    <values>SerifFont</values>
    <values>SansSerifFont</values>
    <values>FixedPitchFont</values>
  </Enumeration>
   
  <Attribute itemName="fontFamily">
    <type itemref="docSchema:fontFamilyEnumType"/>
  </Attribute>

  <Attribute itemName="fontSize">
    <type itemref="Float"/>
  </Attribute>

  <!--
    Currently, fontStyle is a string containing any of the following words:
    bold light italic underline, but others will be included in the future
  -->
  <Attribute itemName="fontStyle">
    <type itemref="String"/> 
  </Attribute>

  <Attribute itemName="fontName">
    <type itemref="String"/>
  </Attribute>

  <Struct itemName="ColorType" itemClass="OSAF.framework.blocks.DocumentTypes.ColorStruct">
    <fields key="red"></fields>
    <fields key="green"></fields>
    <fields key="blue"></fields>
    <fields key="alpha"></fields>
    <implementationTypes key="python">OSAF.framework.blocks.DocumentTypes.ColorType</implementationTypes>
  </Struct>
 
  <Struct itemName="SizeType" itemClass="OSAF.framework.blocks.DocumentTypes.SizeStruct">
    <fields key="width"></fields>
    <fields key="height"></fields>
    <implementationTypes key="python">OSAF.framework.blocks.DocumentTypes.SizeType</implementationTypes>
  </Struct>
 
  <Struct itemName="RectType" itemClass="OSAF.framework.blocks.DocumentTypes.RectStruct">
    <fields key="top"></fields>
    <fields key="left"></fields>
    <fields key="bottom"></fields>
    <fields key="right"></fields>
    <implementationTypes key="python">OSAF.framework.blocks.DocumentTypes.RectType</implementationTypes>
  </Struct>
 
  <!--
    Chandler Query
  -->
  <Kind itemName="Query">
    <classes key="python">OSAF.framework.blocks.Query.Query</classes>

    <Attribute itemName="usedInBlocks">
      <type itemref="docSchema:Block"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="docSchema:Block/content-spec"/>
    </Attribute>

   <Enumeration itemName="queryEnumType">
      <values>ContainerSearch</values>
      <values>listOfItems</values>
    </Enumeration>

    <Attribute itemName="queryEnum">
      <type itemref="docSchema:Query/queryEnumType"/>
    </Attribute>

    <Attribute itemName="data">
      <type itemref="String"/>
    </Attribute>

    <attributes itemref="docSchema:Query/queryEnum"/>
    <attributes itemref="docSchema:Query/data"/>
    <attributes itemref="docSchema:Query/usedInBlocks"/>
  </Kind>

  <!--
    Named styles
  -->
  <Kind itemName="Style">
    <classes key="python">OSAF.framework.blocks.Styles.Style</classes>
    
    <Attribute itemName="usedInBlocks">
      <type itemref="docSchema:Block"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="docSchema:Block/styles"/>
    </Attribute>

    <attributes itemref="docSchema:Style/usedInBlocks"/>
  </Kind>

  <Kind itemName="CharacterStyle">
    <classes key="python">OSAF.framework.blocks.Styles.CharacterStyle</classes>
    <superKinds itemref="docSchema:Style"/>

    <attributes itemref="docSchema:fontFamily"/>
    <attributes itemref="docSchema:fontSize"/>
    <attributes itemref="docSchema:fontStyle"/>
    <attributes itemref="docSchema:fontName"/>
  </Kind>
  

  <!--
    Events
  -->

  <Kind itemName="BlockEvent">
    <classes key="python">OSAF.framework.blocks.Block.BlockEvent</classes>
    <superKinds itemref="events:Event"/>

    <Enumeration itemName="dispatchEnumType">
      <values>Broadcast</values>
      <values>Controller</values>
    </Enumeration>

    <Attribute itemName="dispatchEnum">
      <type itemref="docSchema:BlockEvent/dispatchEnumType"/>
    </Attribute>

    <Attribute itemName="UUID">
      <type itemref="UUID"/>
    </Attribute>

    <attributes itemref="docSchema:BlockEvent/dispatchEnum"/>
    <attributes itemref="docSchema:BlockEvent/UUID"/>
  </Kind>

  <!--
    Block
  -->

  <Kind itemName="Block">
    <classes key="python">OSAF.framework.blocks.Block.Block</classes>

    <Attribute itemName="content-spec">
      <type itemref="docSchema:Query"/>
      <inverseAttribute itemref="docSchema:Query/usedInBlocks"/>
    </Attribute>

    <Attribute itemName="parentBlock">
      <type itemref="docSchema:Block"/>
      <cardinality>single</cardinality>
      <inverseAttribute itemref="docSchema:Block/childrenBlocks"/>
    </Attribute>
  
    <Attribute itemName="childrenBlocks">
      <type itemref="docSchema:Block"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="docSchema:Block/parentBlock"/>
    </Attribute>

    <Attribute itemName="styles">
      <type itemref="docSchema:Style"/>
      <cardinality>list</cardinality>
      <inverseAttribute itemref="docSchema:Style/usedInBlocks"/>
    </Attribute>

    <Attribute itemName="open">
      <type itemref="Boolean"/>
    </Attribute>

    <attributes itemref="docSchema:Block/content-spec"/>
    <attributes itemref="docSchema:Block/childrenBlocks"/>
    <attributes itemref="docSchema:Block/parentBlock"/>
    <attributes itemref="docSchema:Block/styles"/>
    <attributes itemref="docSchema:Block/open"/>
  </Kind>
  
  <!--
    Controller
  -->
  <Kind itemName="Controller">
    <classes key="python">OSAF.framework.blocks.Controller.Controller</classes>
    <superKinds itemref="docSchema:Block"/>
  </Kind>

  <!--
    ContainerChild is the most generic container
  -->
  <Kind itemName="ContainerChild">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.ContainerChild</classes>
    <superKinds itemref="docSchema:Block"/>
  </Kind>

  <!--
    RectContainer is a rectangular container
  -->
  <Kind itemName="RectContainer">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.RectContainer</classes>
    <superKinds itemref="docSchema:ContainerChild"/>

    <Attribute itemName="size">
      <type itemref="docSchema:SizeType"/>
    </Attribute>

    <Attribute itemName="minimumSize">
      <type itemref="docSchema:SizeType"/>
    </Attribute>

    <Attribute itemName="border">
      <type itemref="docSchema:RectType"/>
    </Attribute>
    
    <Enumeration itemName="alignmentEnumType">
      <values>grow</values>
      <values>growConstrainAspectRatio</values>
      <values>alignCenter</values>
      <values>alignTopCenter</values>
      <values>alignMiddleLeft</values>
      <values>alignBottomCenter</values>
      <values>alignMiddleRight</values>
      <values>alignTopLeft</values>
      <values>alignTopRight</values>
      <values>alignBottomLeft</values>
      <values>alignBottomRight</values>
    </Enumeration>

    <Attribute itemName="alignmentEnum">
      <type itemref="docSchema:RectContainer/alignmentEnumType"/>
    </Attribute>

    <Attribute itemName="stretchFactor">
      <type itemref="Float"/>
    </Attribute>

    <attributes itemref="docSchema:RectContainer/size"/>
    <attributes itemref="docSchema:RectContainer/minimumSize"/>
    <attributes itemref="docSchema:RectContainer/border"/>
    <attributes itemref="docSchema:RectContainer/alignmentEnum"/>
    <attributes itemref="docSchema:RectContainer/stretchFactor"/>
  </Kind>

  <!--
    BoxContainer
  -->
  <Kind itemName="BoxContainer">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.BoxContainer</classes>
    <superKinds itemref="docSchema:RectContainer"/>

    <Enumeration itemName="orientationEnumType">
      <values>Horizontal</values>
      <values>Vertical</values>
    </Enumeration>

    <Attribute itemName="orientationEnum">
      <type itemref="docSchema:BoxContainer/orientationEnumType"/>
    </Attribute>

    <attributes itemref="docSchema:BoxContainer/orientationEnum"/>
  </Kind>

  <!--
    StaticText
  -->
  <Kind itemName="StaticText">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.StaticText</classes>
    <superKinds itemref="docSchema:RectContainer"/>

    <Enumeration itemName="alignmentEnumType">
      <values>Left</values>
      <values>Center</values>
      <values>Right</values>
    </Enumeration>
    
    <Attribute itemName="alignment">
      <type itemref="docSchema:StaticText/alignmentEnumType"/>
    </Attribute>
    
    <Attribute itemName="title">
      <type itemref="String"/>
    </Attribute>
    
    <attributes itemref="docSchema:StaticText/alignment"/>
    <attributes itemref="docSchema:StaticText/title"/>
  </Kind>

  <!--
    Menu
  -->
  <Kind itemName="Menu">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.Menu</classes>
    <superKinds itemref="docSchema:ContainerChild"/>

    <Attribute itemName="title">
      <type itemref="String"/>
    </Attribute>
    
    <attributes itemref="docSchema:Menu/title"/>
  </Kind>

  <!--
    MenuItem
  -->
  <Kind itemName="MenuItem">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.MenuItem</classes>
    <superKinds itemref="docSchema:ContainerChild"/>

    <Attribute itemName="title">
      <type itemref="String"/>
    </Attribute>
    
    <Enumeration itemName="menuItemKindEnumType">
      <values>Normal</values>
      <values>Separator</values>
      <values>Check</values>
      <values>Radio</values>
    </Enumeration>
    
    <Attribute itemName="menuItemKind">
      <type itemref="docSchema:MenuItem/menuItemKindEnumType"/>
    </Attribute>
    
    <Attribute itemName="accel">
      <type itemref="String"/>
    </Attribute>
    
    <Attribute itemName="helpString">
      <type itemref="String"/>
    </Attribute>
    
    <Attribute itemName="event">
      <type itemref="docSchema:BlockEvent"/>
    </Attribute>
    
    <attributes itemref="docSchema:MenuItem/title"/>
    <attributes itemref="docSchema:MenuItem/menuItemKind"/>
    <attributes itemref="docSchema:MenuItem/accel"/>
    <attributes itemref="docSchema:MenuItem/helpString"/>
    <attributes itemref="docSchema:MenuItem/event"/>
  </Kind>

  <!--
    TreeList
  -->
  <Kind itemName="TreeList">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.TreeList</classes>
    <superKinds itemref="docSchema:RectContainer"/>

    <Attribute itemName="columnHeadings">
      <type itemref="String"/>
      <cardinality>list</cardinality>
    </Attribute>

    <Attribute itemName="columnWidths">
      <type itemref="Integer"/>
      <cardinality>list</cardinality>
    </Attribute>

    <attributes itemref="docSchema:TreeList/columnHeadings"/>
    <attributes itemref="docSchema:TreeList/columnWidths"/>
  </Kind>  
  
  <!--
    EditText
  -->
  <Kind itemName="EditText">
    <classes key="python">OSAF.framework.blocks.ContainerBlocks.EditText</classes>
    <superKinds itemref="docSchema:RectContainer"/>

    <Enumeration itemName="lineStyleEnumType">
      <values>SingleLine</values>
      <values>MultiLine</values>
    </Enumeration>

    <Attribute itemName="lineStyleEnum">
      <type itemref="docSchema:EditText/lineStyleEnumType"/>
    </Attribute>

    <Enumeration itemName="textStyleEnumType">
      <values>PlainText</values>
      <values>RichText</values>
    </Enumeration>

    <Attribute itemName="textStyleEnum">
      <type itemref="docSchema:EditText/textStyleEnumType"/>
    </Attribute>

    <Attribute itemName="readOnly">
      <type itemref="Boolean"/>
    </Attribute>

    <attributes itemref="docSchema:EditText/lineStyleEnum"/>
    <attributes itemref="docSchema:EditText/textStyleEnum"/>
    <attributes itemref="docSchema:EditText/readOnly"/>
  </Kind>

</Parcel>
