<?xml version="1.0" encoding="iso-8859-1"?>

<Parcel describes="//parcels/osaf/examples/zaobao"
        itemName="zaobao"
        itemClass="osaf.examples.zaobao.RSSData.ZaoBaoParcel"
        xmlns="//Schema/Core"
        xmlns:zaobao="//parcels/osaf/examples/zaobao"
        xmlns:fw="//parcels/osaf/framework"
        xmlns:task="//parcels/osaf/framework/tasks"
        xmlns:content="//parcels/osaf/contentmodel"
        xmlns:docSchema="//parcels/osaf/framework/blocks">

  <displayName>ZaoBao RSS Schema</displayName>
  <description>RSS schema for ZaoBao parcel for 0.4 release</description>
  <version>0.1</version>


  <Attribute itemName="link">
    <displayName>Web URL</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="category">
    <displayName>Category</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="creator">
    <displayName>Creator</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="date">
    <displayName>Date</displayName>
    <cardinality>single</cardinality>
    <type itemref="DateTime"/>
  </Attribute>


  <!-- Kind: RSSChannel -->

  <Kind itemName="RSSChannel">
    <displayName>RSS Channel</displayName>

    <!-- Feed specific attributes -->
    <Attribute itemName="url">
      <displayName>URL</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>
  
    <Attribute itemName="etag">
      <displayName>eTag</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>
  
    <Attribute itemName="lastModified">
      <displayName>Last Modified</displayName>
      <cardinality>single</cardinality>
      <type itemref="DateTime"/>
    </Attribute>

    <!-- channel attributes -->
    <Attribute itemName="copyright">
      <displayName>Copyright</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>

    <Attribute itemName="language">
      <displayName>Language</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>

    <Attribute itemName="isUnread">
      <displayName>Is Unread</displayName>
      <cardinality>single</cardinality>
      <type itemref="Boolean"/>
    </Attribute>
  
    <Attribute itemName="items">
      <displayName>Items</displayName>
      <cardinality>list</cardinality>
      <type itemref="zaobao:RSSItem"/>
      <inverseAttribute itemref="zaobao:RSSItem/channel"/>
    </Attribute>

    <attributes itemref="zaobao:RSSChannel/url"/>
    <attributes itemref="zaobao:RSSChannel/etag"/>
    <attributes itemref="zaobao:RSSChannel/lastModified"/>

    <attributes itemref="zaobao:link"/>
    <attributes itemref="zaobao:category"/>
    <attributes itemref="zaobao:creator"/>
    <attributes itemref="zaobao:date"/>
    <attributes itemref="zaobao:RSSChannel/copyright"/>
    <attributes itemref="zaobao:RSSChannel/language"/>

    <attributes itemref="zaobao:RSSChannel/isUnread"/>
    <attributes itemref="zaobao:RSSChannel/items"/>

    <superKinds itemref="content:ContentItem"/>
    <classes key="python">osaf.examples.zaobao.RSSData.RSSChannel</classes>
  </Kind>  


  <!-- Kind: RSSItem -->

  <Kind itemName="RSSItem">
    <displayName>RSS Item</displayName>

    <Attribute itemName="channel">
      <displayName>Channel</displayName>
      <cardinality>single</cardinality>
      <type itemref="zaobao:RSSChannel"/>
      <inverseAttribute itemref="zaobao:RSSChannel/items"/>
    </Attribute>

    <Attribute itemName="content">
      <cardinality>single</cardinality>
      <type itemref="Text"/>
    </Attribute>

    <attributes itemref="zaobao:RSSItem/content"/>
    <attributes itemref="zaobao:link"/>
    <attributes itemref="zaobao:category"/>
    <attributes itemref="zaobao:creator"/>
    <attributes itemref="zaobao:date"/>

    <attributes itemref="zaobao:RSSItem/channel"/>
    <superKinds itemref="content:ContentItem"/>
    <classes key="python">osaf.examples.zaobao.RSSData.RSSItem</classes>
  </Kind>


  <!-- ZaoBao Task Definition -->


  <task:Task itemName="ZaoBaoTask">
    <displayName>ZaoBao Scheduled Task</displayName>

    <task:Schedule itemName="ZaoBaoSchedule">
      <task:startTime>2003-11-11 11:11:11+0800</task:startTime>
      <task:repeatFlag>True</task:repeatFlag>
      <task:repeatDelay>00:00:05:00</task:repeatDelay>
    </task:Schedule>

    <task:Action itemName="GetFeeds" itemClass="osaf.examples.zaobao.ZaoBaoTask.UpdateAction">
      <description>Gets and updates all the feeds</description>
    </task:Action>

    <task:schedule itemref="zaobao:ZaoBaoTask/ZaoBaoSchedule"/>
    <task:actions itemref="zaobao:ZaoBaoTask/GetFeeds"/>

  </task:Task>


  <!-- view related stuff -->
  <Kind itemName="ZaoBaoItemDetail">
    <classes key="python">osaf.examples.zaobao.blocks.ZaoBaoItemDetail</classes>
    <superKinds itemref="docSchema:ItemDetail"/>
  </Kind>  


</Parcel>
