<?xml version="1.0" encoding="iso-8859-1"?>

<Parcel itemName="zaobao"
        xmlns="//Schema/Core"
        xmlns:zaobao="//Parcels/OSAF/examples/zaobao"
        xmlns:agent="//Parcels/OSAF/AppSchema/AgentSchema">

  <displayName>ZaoBao RSS Schema</displayName>
  <description>RSS schema for ZaoBao parcel for 0.2 release</description>
  <version>0.1</version>

  <Attribute itemName="link">
    <displayName>Web URL</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <!-- Kind: RSSChannel -->

  <Kind itemName="RSSFeed">
    <displayName>RSS Feed</displayName>

    <Attribute itemName="etag">
      <displayName>eTag</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>
  
    <Attribute itemName="lastModified">
      <displayName>Last Modified</displayName>
      <cardinality>single</cardinality>
      <type itemref="DateTime"/>
    </Attribute>

    <Attribute itemName="channel">
      <displayName>The feed's channel</displayName>
      <cardinality>single</cardinality>
      <type itemref="zaobao:RSSChannel"/>
      <inverseAttribute itemref="zaobao:RSSChannel/feed"/>
    </Attribute>

    <attributes itemref="zaobao:link"/>
    <attributes itemref="zaobao:RSSFeed/etag"/>
    <attributes itemref="zaobao:RSSFeed/lastModified"/>
    <attributes itemref="zaobao:RSSFeed/channel"/>
    <superKinds itemref="Item"/>
    <classes key="python">OSAF.examples.zaobao.RSSData.RSSFeed</classes>
  </Kind>


  <!-- Kind: RSSBase -->

  <Kind itemName="RSSBase">
    <displayName>RSS Base Item</displayName>

    <Attribute itemName="creator">
      <displayName>Creator</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>

    <Attribute itemName="category">
      <displayName>Category</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>

    <Attribute itemName="date">
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>

    <attributes itemref="zaobao:link"/>
    <attributes itemref="zaobao:RSSBase/creator"/>
    <attributes itemref="zaobao:RSSBase/category"/>
    <attributes itemref="zaobao:RSSBase/date"/>
    <superKinds itemref="Item"/>
  </Kind>


  <!-- Kind: RSSChannel -->

  <Kind itemName="RSSItem">
    <displayName>RSS Item</displayName>

    <Attribute itemName="channel">
      <displayName>Channel</displayName>
      <cardinality>single</cardinality>
      <type itemref="zaobao:RSSChannel"/>
      <inverseAttribute itemref="zaobao:RSSChannel/items"/>
    </Attribute>

    <attributes itemref="zaobao:RSSItem/channel"/>
    <superKinds itemref="zaobao:RSSBase"/>
    <classes key="python">OSAF.examples.zaobao.RSSData.RSSItem</classes>
  </Kind>


  <!-- Kind: RSSChannel -->

  <Kind itemName="RSSChannel">
    <displayName>RSS Channel</displayName>

    <Attribute itemName="language">
      <displayName>Language</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>
  
    <Attribute itemName="encoding">
      <displayName>Encoding</displayName>
      <cardinality>single</cardinality>
      <type itemref="String"/>
    </Attribute>
  
    <Attribute itemName="isUnread">
      <displayName>Is Unread</displayName>
      <cardinality>single</cardinality>
      <type itemref="Boolean"/>
    </Attribute>
  
    <Attribute itemName="items">
      <displayName>Items</displayName>
      <cardinality>list</cardinality>
      <type itemref="zaobao:RSSItem"/>
      <inverseAttribute itemref="zaobao:RSSItem/channel"/>
    </Attribute>

    <Attribute itemName="feed">
      <displayName>The channel's feed</displayName>
      <cardinality>single</cardinality>
      <type itemref="zaobao:RSSFeed"/>
      <inverseAttribute itemref="zaobao:RSSFeed/channel"/>
    </Attribute>

    <attributes itemref="zaobao:RSSChannel/language"/>
    <attributes itemref="zaobao:RSSChannel/encoding"/>
    <attributes itemref="zaobao:RSSChannel/isUnread"/>
    <attributes itemref="zaobao:RSSChannel/items"/>
    <attributes itemref="zaobao:RSSChannel/feed"/>
    <superKinds itemref="zaobao:RSSBase"/>
    <classes key="python">OSAF.examples.zaobao.RSSData.RSSChannel</classes>
  </Kind>  


  <!-- ZaoBao Agent Definition -->

  <agent:AgentItem itemName="ZaoBaoAgent">
    <displayName>The ZaoBao Agent</displayName>
    <description>This agent does ZaoBao's work</description>

    <agent:Schedule itemName="ZaoBaoSchedule">
      <agent:startTime>2003-11-11 12:56:00+0800</agent:startTime>
      <agent:repeatFlag>True</agent:repeatFlag>
      <agent:repeatDelay>00:10:00:00</agent:repeatDelay>
    </agent:Schedule>

    <agent:Action itemName="GetFeeds" itemClass="OSAF.examples.zaobao.ZaoBaoAgent.UpdateAction">
      <description>Gets and updates all the feeds</description>
    </agent:Action>

    <agent:Instruction itemName="UpdateFeeds">
      <description>Update feeds every so often based on the ZaoBaoSchedule</description>
      <agent:enabled>True</agent:enabled>
      <agent:schedule itemref="zaobao:ZaoBaoAgent/ZaoBaoSchedule"/>
      <agent:actions itemref="zaobao:ZaoBaoAgent/GetFeeds"/>
    </agent:Instruction>

    <agent:instructions itemref="zaobao:ZaoBaoAgent/UpdateFeeds"/>
  </agent:AgentItem>

</Parcel>
