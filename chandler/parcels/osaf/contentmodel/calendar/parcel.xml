<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel describes="//parcels/osaf/contentmodel/calendar"
        itsName="calendar"
        itemClass="osaf.contentmodel.calendar.Calendar.CalendarParcel"
        xmlns="http://osafoundation.org/parcels/core"
        xmlns:content="http://osafoundation.org/parcels/osaf/contentmodel"
        xmlns:mail="http://osafoundation.org/parcels/osaf/contentmodel/mail"
        xmlns:contact="http://osafoundation.org/parcels/osaf/contentmodel/contacts"
        xmlns:cal="http://osafoundation.org/parcels/osaf/contentmodel/calendar">

  <displayName>Calendar Content Model</displayName>
  <description>Kinds and Attributes related to Calendar functionality. This schema is still a strawman schema, a starting point.</description>
  <issues>We have not yet fully addressed dates, times, timezones, etc.</issues>
  <issues>Reminders, recurrence are still placeholders, and they might be general enough to live with PimSchema.</issues>
  <issues>The calendar schema depends heavily on people/contacts/users/groups/etc, we have yet to adequately model them.</issues>
  <issues>Consider using the icalendar terminology, generally</issues>
  <issues>Consider using the common icalendar task attributes (i.e. percentComplete)</issues>
  <version>0.3</version>
  <author>Open Source Applications Foundation</author>


  <!-- Common Attributes -->
  <Attribute itsName="startTime">
    <issues>For items that represent *only* Tasks, this attribute serves as the 'Do-on' attribute. For items that represent only Calendar Events, this attribute serves as the 'Start-time' attribute. I think this unified attribute may match the way iCalendar models these attributes, but we should check to make sure. - Brian</issues>
    <displayName>Start-Time/Do-on</displayName>
    <type itemref="DateTime"/>
  </Attribute>

  <Attribute itemName="location">
    <issues>We might want to think about having Location be just a 'String', rather than a reference to a 'Location' item.</issues>
    <displayName>Location</displayName>
    <type itemref="cal:Location"/>
    <inverseAttribute itemref="cal:eventsAtLocation"/>
  </Attribute>

  <Attribute itsName="eventsAtLocation">
    <displayName>Calendar Events</displayName>
    <cardinality>list</cardinality>
    <type itemref="cal:CalendarEvent"/>
    <inverseAttribute itemref="cal:location"/>
  </Attribute>

  <Attribute itsName="recurrence">
    <displayName>Recurrence Patterns</displayName>
    <cardinality>list</cardinality>
    <type itemref="cal:RecurrencePattern"/>
  </Attribute>

  <Attribute itsName="reminders">
    <displayName>Reminders</displayName>
    <cardinality>list</cardinality>
    <type itemref="cal:Reminder"/>
  </Attribute>

  <Attribute itsName="resources">
    <displayName>Resources</displayName>
    <cardinality>list</cardinality>
    <type itemref="String"/>
  </Attribute>


  <!-- Calendar Event Attributes -->
  <Enumeration itsName="TimeTransparencyEnum">
    <displayName>Time Transparency</displayName>
    <issues>The iCalendar values for Time Transparency are slightly different. We should 
        consider making our values match the iCalendar ones, or be a superset of them.  
        Mitch suggested that a 'cancelled' value would be a useful extension.</issues>
    <values>busy</values>
    <values>free</values>
    <values>tentative</values>
    <values>cancelled</values>
  </Enumeration>

  <Attribute itsName="endTime">
    <displayName>End-Time</displayName>
    <type itemref="DateTime"/>
  </Attribute>

  <Attribute itsName="calendar">
    <displayName>Calendar</displayName>
    <cardinality>list</cardinality>
    <type itemref="cal:Calendar"/>
  </Attribute>

  <Attribute itsName="participants">
    <displayName>Participants</displayName>
    <cardinality>list</cardinality>
    <issues>@@@ type should be Contact</issues>
    <type itemref="content:ContentItem"/>
    <inverseAttribute itemref="cal:participatingIn"/>
  </Attribute>

  <Attribute itsName="participatingIn">
    <displayName>Participant in Events</displayName>
    <description>A list of events that include this email address as one of the invitees.</description>
    <cardinality>list</cardinality>
    <type itemref="cal:CalendarEvent"/>
    <inverseAttribute itemref="cal:participants"/>
  </Attribute>

  <Attribute itsName="organizer">
    <displayName>Meeting Organizer</displayName>
  </Attribute>

  <Attribute itsName="attendees">
    <displayName>Meeting Attendee</displayName>
    <cardinality>list</cardinality>
  </Attribute>

  <Attribute itsName="transparency">
    <displayName>Time Transparency</displayName>
    <type itemref="cal:TimeTransparencyEnum"/>
  </Attribute>
  
  <Attribute itsName="who">
    <redirectTo>participants</redirectTo>
  </Attribute>

  <Attribute itsName="about">
    <redirectTo>displayName</redirectTo>
  </Attribute>

  <Attribute itsName="date">
    <redirectTo>startTime</redirectTo>
  </Attribute>  

  <Kind itsName="CalendarEventAspect">
    <displayName>Calendar Event Aspect</displayName>
    <description>This is the set of CalendarEvent-specific attributes.</description>
    <description>This Kind is 'mixed in' to others kinds to create Kinds that can be instantiated</description>

    <!-- event-specific attributes -->
    <attributes itemref="cal:startTime"/>
    <attributes itemref="cal:location"/>
    <attributes itemref="cal:recurrence"/>
    <attributes itemref="cal:reminders"/>
    <attributes itemref="cal:resources"/>
    <attributes itemref="cal:endTime"/>
    <attributes itemref="cal:calendar"/>
    <attributes itemref="cal:participants"/>
    <attributes itemref="cal:organizer"/>
    <attributes itemref="cal:attendees"/>
    <attributes itemref="cal:transparency"/>
    <attributes itemref="cal:who"/>
    <attributes itemref="cal:about"/>
    <attributes itemref="cal:date"/>

  </Kind>

  <Kind itsName="CalendarEvent">
    <displayName>Calendar Event</displayName>
    <issues>Calendar Event should maybe have a 'Timezone' attribute.</issues>
    <issues>Do we want to have 'Duration' as a derived attribute on Calendar Event? </issues>
    <issues>Do we want to have a Boolean 'AllDay' attribute, to indicate that an event is an all day event? Or should we instead have the 'startTime' and 'endTime' attributes be 'RelativeDateTime' instead of 'DateTime', so that they can store all day values like '14 June 2004' as well as specific time values like '4:05pm 14 June 2004'?</issues>
    <superKinds itemref="content:Note"/>
    <superKinds itemref="cal:CalendarEventAspect"/>

    <classes key="python">osaf.contentmodel.calendar.Calendar.CalendarEvent</classes>

  </Kind>

  <Kind itsName="Location">
    <superKinds itemref="Item"/>
    <displayName>Location</displayName>
    <issues>Location may not be calendar specific</issues>
    <attributes itemref="displayName"/>
    <attributes itemref="cal:eventsAtLocation"/>
    <displayAttribute itemref="displayName"/>
    <classes key="python">osaf.contentmodel.calendar.Calendar.Location</classes>
  </Kind>

  <Kind itsName="Calendar">
    <superKinds itemref="Item"/>
    <displayName>Calendar</displayName>
    <issues>Calendar should have an attribute that points to all the Calendar Events.</issues>
    <issues>Calendar should maybe have a 'Timezone' attribute.</issues>
    <attributes itemref="displayName"/>
    <displayAttribute itemref="displayName"/>
    <classes key="python">osaf.contentmodel.calendar.Calendar.Calendar</classes>
  </Kind>

  <Kind itsName="RecurrencePattern">
    <superKinds itemref="Item"/>
    <issues>Recurrence Pattern is still a placeholder, and  might be general enough to live with PimSchema.</issues>
    <issues>Recurrence Pattern should have an attribute that points to a Calendar Event.</issues>
    <displayName>Recurrence Pattern</displayName>
    <classes key="python">osaf.contentmodel.calendar.Calendar.RecurrencePattern</classes>
  </Kind>

  <Kind itsName="Reminder">
    <superKinds itemref="Item"/>
    <issues>Reminder is still a placeholder, and  might be general enough to live with PimSchema.</issues>
    <issues>Reminder should have an attribute that points to a Calendar Event.</issues>
    <displayName>Reminder</displayName>
    <classes key="python">osaf.contentmodel.calendar.Calendar.Reminder</classes>
  </Kind>

</Parcel>
