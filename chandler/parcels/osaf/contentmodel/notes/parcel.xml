<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel describes="//parcels/OSAF/contentmodel/notes"
        itemName="notes"
	itemClass="OSAF.contentmodel.notes.Notes.NotesParcel"
        xmlns="//Schema/Core"
        xmlns:content="//parcels/OSAF/contentmodel"
        xmlns:notes="//parcels/OSAF/contentmodel/notes">

  <displayName>Notes Content Model</displayName>
  <version>0.3</version>
  <author>Open Source Applications Foundation</author>

  <!-- Note -->

  <Attribute itemName="title">
    <displayName>Title</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="body">
    <displayName>Body</displayName>
    <cardinality>single</cardinality>
    <type itemref="Text"/>
  </Attribute>

  <Attribute itemName="attachedNotes">
    <displayName>Contained Notes</displayName>
    <description>Notes contained in this content item.</description>
    <issues>deletePolicy should be cascade</issues>
    <cardinality>list</cardinality>
    <type itemref="notes:Note"/>
    <inverseAttribute itemref="notes:attachedToItems"/>
  </Attribute>

  <Attribute itemName="attachedToItems">
    <displayName>Contained in Item</displayName>
    <description>If this Note is a free-standing independent item, then this attribute will be empty. If this Note is contained in some other item, then this attribute will point to that item.</description>
    <cardinality>single</cardinality>
    <required>False</required>
    <type itemref="content:ContentItem"/>
    <inverseAttribute itemref="notes:attachedNotes"/>
  </Attribute>

  <Kind itemName="Note">
    <displayName>Note</displayName>
    <superKinds itemref="content:ContentItem"/>
    <displayAttribute itemref="notes:title"/>
    <attributes itemref="notes:title"/>
    <attributes itemref="notes:body"/>
    <attributes itemref="notes:attachedToItems"/>
    <classes key="python">OSAF.contentmodel.notes.Notes.Note</classes>
  </Kind>

  <!-- Conversation -->

  <Attribute itemName="conversations">
    <displayName>Conversations</displayName>
    <description>Conversations about this content item.</description>
    <issues>deletePolicy should be cascade</issues>
    <cardinality>list</cardinality>
    <type itemref="notes:Conversation"/>
    <inverseAttribute itemref="notes:subjectItem"/>
  </Attribute>

  <Attribute itemName="subjectItem">
    <displayName>Subject Item</displayName>
    <description>If this Conversation is a free-standing independent item, then this attribute will be empty. If this Conversation is contained in some other item, then this attribute will point to that item.</description>
    <cardinality>single</cardinality>
    <required>False</required>
    <type itemref="content:ContentItem"/>
    <inverseAttribute itemref="notes:conversations"/>
  </Attribute>

  <Attribute itemName="conversationLines">
    <displayName>Conversation Lines</displayName>
    <description>The list of lines of dialog in this conversation.</description>
    <issues>deletePolicy should be cascade</issues>
    <cardinality>list</cardinality>
    <type itemref="notes:ConversationLine"/>
    <inverseAttribute itemref="notes:containedInConversation"/>
  </Attribute>

  <Kind itemName="Conversation">
    <displayName>Conversation</displayName>
    <superKinds itemref="content:ContentItem"/>
    <attributes itemref="notes:subjectItem"/>
    <attributes itemref="notes:conversationLines"/>
    <classes key="python">OSAF.contentmodel.notes.Notes.Conversation</classes>
  </Kind>

  <!-- Conversation -->

  <Attribute itemName="author">
    <displayName>Author</displayName>
    <issues>This should be a Contact, or perhaps it should be either a Contact or a String.</issues>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>
  
  <Attribute itemName="line">
    <displayName>Line</displayName>
    <description>A line of text in a conversation, such as "okay, let's meet at 5:00".</description>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="timestamp">
    <displayName>Timestamp</displayName>
    <cardinality>single</cardinality>
    <type itemref="DateTime"/>
  </Attribute>

  <Attribute itemName="containedInConversation">
    <displayName>Contained in Conversation</displayName>
    <description>The Conversation that this line is a part of.</description>
    <cardinality>single</cardinality>
    <required>True</required>
    <type itemref="notes:Conversation"/>
    <inverseAttribute itemref="notes:conversationLines"/>
  </Attribute>

  <Kind itemName="ConversationLine">
    <displayName>Conversation Line</displayName>
    <issues>Perhaps for performance reasons we should implement 'ConversationLine' as a struct rather than a first-class Kind.</issues>
    <attributes itemref="notes:author"/>
    <attributes itemref="notes:line"/>
    <attributes itemref="notes:timestamp"/>
    <attributes itemref="notes:containedInConversation"/>
  </Kind>

</Parcel>