<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Revision$ -->
<!-- $Date$ -->
<!-- Copyright (c) 2003 Open Source Applications Foundation -->
<!-- License: http://osafoundation.org/Chandler_0.1_license_terms.htm -->

<Parcel describes="//parcels/OSAF/contentmodel/notes"
        itemName="notes"
	itemClass="OSAF.contentmodel.notes.Notes.NotesParcel"
        xmlns="//Schema/Core"
        xmlns:content="//parcels/OSAF/contentmodel"
        xmlns:notes="//parcels/OSAF/contentmodel/notes">

  <displayName>Notes Content Model</displayName>
  <version>0.3</version>
  <author>Open Source Applications Foundation</author>

  <!-- Note -->

  <Attribute itemName="title">
    <displayName>Title</displayName>
    <cardinality>single</cardinality>
    <type itemref="String"/>
  </Attribute>

  <Attribute itemName="body">
    <displayName>Body</displayName>
    <cardinality>single</cardinality>
    <type itemref="Text"/>
  </Attribute>

  <Attribute itemName="attachedNotes">
    <displayName>Contained Notes</displayName>
    <description>Notes contained in this content item.</description>
    <issues>deletePolicy should be cascade</issues>
    <cardinality>list</cardinality>
    <type itemref="notes:Note"/>
    <inverseAttribute itemref="notes:attachedToItems"/>
  </Attribute>

  <Attribute itemName="attachedToItems">
    <displayName>Contained in Item</displayName>
    <description>If this Note is a free-standing independent item, then this attribute will be empty. If this Note is contained in some other item, then this attribute will point to that item.</description>
    <cardinality>single</cardinality>
    <required>False</required>
    <type itemref="content:ContentItem"/>
    <inverseAttribute itemref="notes:attachedNotes"/>
  </Attribute>

  <Kind itemName="Note">
    <displayName>Note</displayName>
    <superKinds itemref="content:ContentItem"/>
    <displayAttribute itemref="notes:title"/>
    <attributes itemref="notes:title"/>
    <attributes itemref="notes:body"/>
    <attributes itemref="notes:attachedToItems"/>
    <classes key="python">OSAF.contentmodel.notes.Notes.Note</classes>
  </Kind>

  <!-- Conversation -->

  <Attribute itemName="conversations">
    <displayName>Conversations</displayName>
    <description>Conversations about this content item.</description>
    <issues>deletePolicy should be cascade</issues>
    <cardinality>list</cardinality>
    <type itemref="notes:Conversation"/>
    <inverseAttribute itemref="notes:subjectItem"/>
  </Attribute>

  <Attribute itemName="subjectItem">
    <displayName>Subject Item</displayName>
    <description>If this Conversation is a free-standing independent item, then this attribute will be empty. If this Conversation is contained in some other item, then this attribute will point to that item.</description>
    <cardinality>single</cardinality>
    <required>False</required>
    <type itemref="content:ContentItem"/>
    <inverseAttribute itemref="notes:conversations"/>
  </Attribute>

  <Kind itemName="Conversation">
    <displayName>Conversation</displayName>
    <superKinds itemref="content:ContentItem"/>
    <issues>A conversation should *not* have just a plain text 'body' attribute. Instead it should have a tree of tuples, where each tuple has {timestamp (a DateTime), text-line(a One-Line-String), author (a Contact)}.</issues>
    <attributes itemref="notes:body"/>
    <attributes itemref="notes:subjectItem"/>
    <classes key="python">OSAF.contentmodel.notes.Notes.Conversation</classes>
  </Kind>

</Parcel>